[GENERAL]
description = C. japonica (current release)
database    = c_japonica

html1 = sub { return CGI::h1(CGI::i('Caenorhabditis japonica')); }

# default width of detailed view (pixels)
default features = CG JIGSAW WABA

landmark features = supercontig region:Genomic_canonical region:link

# examples to show in the introduction
examples = Cjap_Contig3
           Cjap_Contig2:140000..180000
	   CJA09395	   
	   eef-2
	   egl*
	   R07E3.6

	   		
# "automatic" classes to try when an unqualified identifier is given
automatic classes = Transcript Gene Protein Component CDS Sequence

# Override the [DETAIL SELECT MENU] from detail_select_menu.conf
#include includes/detail_menu-default.conf

# Plugin configuration
#include includes/plugin.conf


###################################
# Global track defaults.
# Can be overridden by any track
###################################
[TRACK DEFAULTS]
#include includes/track_defaults.conf

#################################
# database definitions
#################################

[c_japonica:database]
db_adaptor  = Bio::DB::GFF
db_args     = -dsn DBI:mysql:c_japonica;user=nobody;host=localhost
passwd      =
search options = default +wildcard -stem +fulltext +autocomplete

# NOTE: aggregators are processed in the order in which they appear, so
# we would like the full transcript to take precedence over RNAs.
aggregators = clone 
     	      alignment 
	      waba_alignment 
	      full_transcript{coding_exon,five_prime_UTR,three_prime_UTR/Transcript}   
	      full_transcript_non_coding{exon,five_prime_UTR,three_prime_UTR/Transcript}
    	      ngasp_gene{CDS,three_prime_UTR,five_prime_UTR}
    	      transposon{coding_exon,five_prime_UTR,three_prime_UTR}
	      processed_transcript{coding_exon,five_prime_UTR,three_prime_UTR/CDS}
	      pseudo{exon:Pseudogene/Pseudogene}
	      RNA{exon/Transcript}
	      coding{coding_exon}
    	      motif_span{motif_segment/Motif}
    	      rnai{RNAi_reagent}
	      ost{expressed_sequence_match}
	      sage_tag{SAGE_tag}
	      wormbase_cds{coding_exon,CDS,five_prime_UTR,three_prime_UTR/CDS}


###########################################################
# the remainder of the sections configure individual tracks
###########################################################

###################################
# Gene Models
###################################

[CG]
# Include appropriate configuration. These MUST come first.
# Override any option by supplying it after the include.
# Core gene model configuration; height, bgcolor, category, key, etc.
#include includes/gene_models-core.track
# Tier 2/3 configuration; supplies: label, description, link
#include includes/gene_models-tier2.track
#feature      = wormbase_cds:curated full_transcript:Coding_transcript
feature      = wormbase_cds:curated
#glyph        = wormbase_transcript
glyph        = transcript
title        = C. japonica gene: $name

[CG:150000]
glyph        = generic
strand_arrow = 1
bgcolor      = sub {shift->strand>0?'violet':'turquoise'}
description  = 0


[CDS]
feature = coding:curated
#include includes/cds.track


[CG_HISTORY]
feature  = wormbase_cds:history
glyph    = wormbase_transcript
title    = Historical gene prediction $name
category     = Genes
key          = Gene Models (historical)
bgcolor      = sub {shift->strand>0?'violet':'turquoise'}
fgcolor      = black
utr_color    = gray
font2color   = blue
height  = sub {
	my $feature = shift;
	return $feature->method =~  /transcript|UTR|coding_exon/i ? 10 : 6;
	}
balloon hover  = sub {my $f = shift;
	                my $name = $f->name; 
                        my $class = $f->class;
    		        "url:/gbrowse_popup?name=$name;class=$class;type=CG";
	} 
label    = sub { 
		my $feature = shift;
		my $desc = join ' ',$feature->notes;
		my $name = $feature->display_name;
		return $desc =~ /(\w{3,4}-\d+\.?\d*)$/ ? "$1 ($name)" : $name;
	}
description  = sub {	     
	my $feature = shift;
	my $notes = join ' ',$feature->notes;
	my $source = $feature->source;
        return "$notes; $source";
    }
citation = Historical gene predictions.

[CG_HISTORY:150000]
feature      = wormbase_cds:history
glyph        = generic
strand_arrow = 1
bgcolor      = sub {shift->strand>0?'violet':'turquoise'}
description = 0

[CODING_TRANSCRIPTS]
# Include appropriate configuration. These MUST come first.
# Override any option by supplying it after the include.
# Core gene model configuration; height, bgcolor, category, key, etc.
category     = Genes
key          = Coding Transcripts
bgcolor      = sub {
	     my $f = shift;
	     return 'gray'   if $f->method =~ /pseudogene/i;
	     return 'violet' if $f->strand > 0;
	     return 'turquoise';
	     }
fgcolor      = black
utr_color    = gray
font2color   = blue
height  = sub {
	my $feature = shift;
	return $feature->method =~  /transcript|UTR|coding_exon/i ? 10 : 6;
	}
balloon hover  = sub {my $f = shift;
	                my $name = $f->name; 
                        my $class = $f->class;
    		        "url:/gbrowse_popup?name=$name;class=$class;type=CG";
	} 
link = sub {
	my $f = shift;
	return if $f->method eq 'RNAz';
	my $name = $f->attributes('Gene') || $f->name;
	return "/get?name=$name;class=Gene";
	}
# Which?
feature = full_transcript:Coding_transcript 
#feature = protein_coding_primary_transcript:Coding_transcript
#	  pseudo:Pseudogene
#          miRNA:miRNA_mature_transcript
#          miRNA_primary_transcript:curated_miRNA
#	  rRNA_primary_transcript:rRNA
#  	  scRNA:scRNA_mature_transcript:scRNA
#	  scRNA:scRNA_mature_transcript:exon
#  	  snRNA:snRNA_mature_transcript		
#	  snoRNA:snoRNA_mature_transcript
#	  tRNA_primary_transcript:tRNAscan-SE-1.23 
#          tRNA:tRNA_mature_transcript
#	  nc_primary_transcript:Non_coding_transcript
#	  ncRNA_primary_transcript:ncRNA
#          transposon:Transposon_CDS
#          transposable_element:Transposon
#	  RNA:RNA
##	  full_transcript_non_coding:Non_coding_transcript
#        	 exon:curated_miRNA
# The glyph definition MUST be in the primary configuration file for the species.
# If it is in gene_models.track, the aggregators cannot be found.
glyph    = sub { 
	 my $f = shift;
	 my ($source) = $f->source;
	 return 'transcript2' if $source =~ /pseudogene/i;
	 return 'wormbase_transcript';
	 }
title    = Coding transcript $name
label    = sub { 
		my $feature = shift;
		my $desc = join ' ',$feature->notes;
		my $name = $feature->display_name;
		return $desc =~ /(\w{3,4}-\d+\.?\d*)$/ ? "$1 ($name)" : $name;
	}
description  = sub {	     
	my $feature = shift;
	my $notes = join ' ',$feature->notes;
	return $notes;
       }
citation = Protein-coding gene structures result from the integration of a variety 
           of prediction methods and data sources followed by manual review and revision
           by WormBase curators. tRNAs are predicted by tRNAscan, and other non-coding 
           RNA transcripts are taken from a variety of literature sources. 
           The purple and blue colors indicate transcripts on the forward and reverse 
           strands respectively. If sufficient room is available between features, gene 
           models end with a triangle; if not a small arrow is used. 
           The grey areas represent 5' and 3' UTRs of protein-coding transcripts, assigned  
           automatically using the extents of overlapping ESTs and full-length cDNAs. The 
           UTR predictions have not been reviewed by WormBase curators, and some are 
           known to contain artifacts.

[CODING_TRANSCRIPTS:150000]
glyph        = generic
strand_arrow = 1
bgcolor      = sub {shift->strand>0?'violet':'turquoise'}
description = 0


################################################
# DNA
################################################
#include includes/dna.track


######################################
#  Alignments / Comparative Genomics
######################################
# ESTs for this species. Not available for all species.
[SPECIES_ESTS]
feature       = alignment:BLAT_japonica_est
key           = C. japonica ESTs (BLAT)
category      = Gene Models
glyph         = segments
bgcolor       = limegreen
fgcolor       = black
height        = 4
connector     = solid
link          = http://www.ncbi.nlm.nih.gov/htbin-post/Entrez/query?db=n&form=1&field=Sequence+ID&term=$name
citation      = These are C. japonica ESTs that have been aligned to the C. japonica genome using BLAT.


## BLAT C. elegans EST Best and BLAT EST other aligned to this species.
## Note that the feature is not consistently named across species
## nor are the available for all
[ELEGANS_ESTS_BEST]
feature       = alignment:BLAT_EST_BEST
glyph         = segments
category      = Comparative Genomics
key           = C. elegans ESTs (BLAT; best)
citation      = These are C. elegans ESTs that have been aligned to 
	        the C. japonica genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].
                 The 5' and 3' reads of a single EST are connected by a dashed line. 
bgcolor       = yellow
fgcolor       = black
height        = 4
connector     = solid
draw_target    = 1
show_mismatch  = 1
ragged_start   = 1
group_pattern = /\.[35]$/

[ELEGANS_ESTS_OTHER]
feature        = alignment:BLAT_EST_OTHER
glyph          = segments
category       = Comparative Genomics
key            = C. elegans ESTs (BLAT; other)
draw_target    = 1
show_mismatch  = 1
ragged_start   = 1
bgcolor        = limegreen
fgcolor        = black
connector      = solid
height         = 5
group_pattern = /\.[35]$/
citation       = These are C. elegans expressed sequence tags (ESTs), that have been
                 aligned to the C. japonica genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].
                 The 5' and 3' reads of a single EST are connected by a dashed line.

# C. elegans mRNAs aligned by blat to species. Note: Different features in use.
[ELEGANS_MRNAS_BEST]
feature       = alignment:BLAT_mRNA_BEST
glyph         = segments
key           = C. elegans mRNAs (BLAT; best)
category      = Comparative Genomics
label         = sub {
                my $f = shift;
                my $label = ($f->source =~ /BLAT_mRNA/) ? 'mRNA' : 'ncRNA';
                my $name = $f->name;
                return "$label: $name";
        }
link          = http://www.ncbi.nlm.nih.gov/htbin-post/Entrez/query?db=n&form=1&field=Sequence+ID&term=$name
citation      = These are C. elegans full length cDNAs and ncRNAs that have been aligned to
                the C. japonica genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].   
draw_target   = 1
show_mismach  = 1
ragged_start  = 1
bgcolor       = sub {   
                my $f = shift;
                return 'yellow' if ($f->source =~ /BLAT_mRNA/);
                return 'grey';
               }
fgcolor       = black
height        = 5
connector     = solid

# NOT AVAILABLE FOR ALL SPECIES
[ELEGANS_MRNAS_OTHER]
feature       = cDNA_match:BLAT_mRNA_OTHER
glyph         = segments
category      = Comparative Genomics
key           = C. elegans mRNAs (BLAT; other)
label         = sub {
                my $f = shift;
                my $label = ($f->source =~ /BLAT_mRNA/) ? 'mRNA' : 'ncRNA';
                my $name = $f->name;
                return "$label: $name";
        }
draw_target   = 1
show_mismach  = 1
ragged_start  = 1
bgcolor       = sub {
                my $f = shift;
                return 'yellow' if ($f->source =~ /BLAT_mRNA/);
                return 'grey';
               }
fgcolor       = black
height        = 5
connector     = solid
citation      = These are C. elegans full length cDNAs and ncRNAs that have been aligned to
                the C. japonica genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].

# NOT AVAILABLE FOR ALL SPECIES
[NEMATODE_ESTS]
feature       = alignment:BLAT_NEMATODE alignment:BLAT_NEMBASE
glyph         = segments
category      = Comparative Genomics
bgcolor       = lightblue
fgcolor       = black
height        = 5
connector     = solid
key           = Other Nematode ESTs
citation      = These are non-C. elegans nematode ESTs that have been aligned to
                 the C. japonica genome using Jim Kent's BLATX program [<a 
                 href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>]. 
                 Analysis provided by Anthony Rogers. 

# NOT AVAILABLE FOR ALL SPECIES
[CAENORHABDITIS_ESTS_BEST]
feature        = alignment:BLAT_Caen_EST_BEST
glyph          = segments
key            = Caenorhabditis ESTs (BLAT; best)
category       = Comparative Genomics
draw_target    = 1
show_mismatch  = 1
ragged_start   = 1
bgcolor        = limegreen
fgcolor        = black
connector      = solid
height         = 5
group_pattern = /\.[35]$/
citation       = These are <i>Caenorhabditis</i> expressed sequence tags (ESTs), that have been
                 aligned to the C. remanei genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].
                 The 5' and 3' reads of a single EST are connected by a dashed line.

# NOT AVAILABLE FOR ALL SPECIES
[CAENORHABDITIS_ESTS_OTHER]
feature        = alignment:BLAT_Caen_EST_OTHER
glyph          = segments
category       = Comparative Genomics
key            = Caenorhabditis ESTs (BLAT; other)
draw_target    = 1
show_mismatch  = 1
ragged_start   = 1
bgcolor        = limegreen
fgcolor        = black
connector      = solid
height         = 5
group_pattern = /\.[35]$/
citation       = These are <i>Caenorhabditis</i> expressed sequence tags (ESTs), that have been
                 aligned to the C. japonica genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].
                 The 5' and 3' reads of a single EST are connected by a dashed line.

# NOT AVAILABLE FOR ALL SPECIES
[CAENORHABDITIS_MRNAS_BEST]
feature       = alignment:BLAT_Caen_mRNA_BEST
glyph         = segments
key           = Caenorhabditis RNAs (BLAT; best)
category      = Comparative Genomics
label         = sub {
                my $f = shift;
                my $label = ($f->source =~ /BLAT_mRNA/) ? 'mRNA' : 'ncRNA';
                my $name = $f->name;
                return "$label: $name";
        }
draw_target   = 1
show_mismach  = 1
ragged_start  = 1
bgcolor       = sub {
                my $f = shift;
                return 'yellow' if ($f->source =~ /BLAT_mRNA/);
                return 'grey';
               }
fgcolor       = black
height        = 5
connector     = solid
citation      = These are <i>Caenorhabditis</i> full length cDNAs and ncRNAs that have been aligned to
                the C. japonica genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].

# NOT AVAILABLE FOR ALL SPECIES
[CAENORHABDITIS_MRNAS_OTHER]
feature       = alignment:BLAT_Caen_mRNA_OTHER
key           = Caenorhabditis RNAs (BLAT; other)
category      = Comparative Genomics
glyph         = segments
label         = sub {
                my $f = shift;
                my $label = ($f->source =~ /BLAT_mRNA/) ? 'mRNA' : 'ncRNA';
                my $name = $f->name;
                return "$label: $name";
        }
draw_target   = 1
show_mismach  = 1
ragged_start  = 1
bgcolor       = sub {
                my $f = shift;
                return 'yellow' if ($f->source =~ /BLAT_mRNA/);
                return 'grey';
               }
fgcolor       = black
height        = 5
connector     = solid
citation      = These are <i>C. elegans</i> full length cDNAs and ncRNAs that have been aligned to
                the C. japonica genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].

# NOT AVAILABLE FOR ALL SPECIES
[ELEGANS_OSTS]
feature       = alignment:BLAT_elegans_ost
key           = C. elegans OSTs (BLAT)
category      = Comparative Genomics
glyph         = segments
bgcolor       = red
fgcolor       = red
height        = 4
connector     = solid
link          = http://www.ncbi.nlm.nih.gov/htbin-post/Entrez/query?db=n&form=1&field=Sequence+ID&term=$name
citation      = These are C. elegans OSTs (Orfeome Sequence Tags) that have been aligned to
                the C. japonica genome using BLAT.

# NOT AVAILABLE FOR ALL SPECIES
[BLASTX]
feature       = protein_match:wublastx
key           = Protein Hits (BLASTX)
category      = Comparative Genomics
glyph         = segments
bgcolor       = sub { $_[0]->name =~ /^BP:/ ? 'blue' : 'orange' }
fgcolor       = black
height        = 5
citation =  These are WUBLASTX (nucleotide to protein, via six-frame
        translation) similarity hits from the genomes of yeast, fly, worm and human and subsets of 
        Swissprot and TREMBL.  Analysis provided by Anthony Rogers.

# NOT AVAILABLE FOR ALL SPECIES
[WABA]
feature           = waba_alignment
key               = Nucleotide alignments to C. elegans (WABA)
category          = Comparative Genomics
bgcolor           = blue
glyph             = heterogeneous_segments
waba_weak_color   = gainsboro
waba_strong_color = cornflowerblue
waba_coding_color = blue
fgcolor           = black
height            = 6
connector         = dashed
box_subparts      = 0
label             = sub {	
			my $feature = shift;
			my $ref   = $feature->target;
			my $start = $feature->target->start;
			my $stop  = $feature->target->end;
	       		my $first = ($feature->segments)[0];
                	my $strand = defined $first && $first->start>$first->end ? -1 : +1;
			($start,$stop) = ($stop,$start) if $strand < 0;
	        	"$ref:$start..$stop";
		    }
citation      = These are segments of the C. japonica rough draft sequence that have been
		aligned to the C. elegans genome using Jim Kent's WABA program [Kent & Zahler, 
		Genome Res 10:1115-25 (2000)].
		WABA distinguishes between low similarity regions (light blue), high-similarity regions
		(medium blue), and regions of high similarity that have the characteristic wobble-base
		mismatch of coding regions (dark blue).  Also see "Briggsae Alignments (BLAST)".


################################################
# NGASP GENES
################################################
[AUGUSTUS]
feature      = ngasp_gene:AUGUSTUS
key          = AUGUSTUS gene predictions
category     = nGASP Genes
label        = 1
description  = 1
glyph        = wormbase_transcript
title        = AUGUSTUS gene $name
citation     = AUGUSTUS gene set from the nGASP competition.  Courtesy of Mario Stanke.
               Gene models are available for download at ftp://ftp.wormbase.org/pub/wormbase/nGASP/final_gene_predictions/predictions

[mGENE]
feature      = ngasp_gene:mGENE
key          = mGENE gene predictions
category     = nGASP Genes
label        = 1
description  = 1
glyph        = wormbase_transcript
title        = mGENE gene $name
citation     = mGENE gene set from the nGASP competition.  Courtesy of Gabriele Schweikert and Gunnar Raetsch.
               Gene models are available for download at ftp://ftp.wormbase.org/pub/wormbase/nGASP/final_gene_predictions/predictions

[FGENESH]
feature      = ngasp_gene:FGENESH
key          = FGENESH gene predictions
category     = nGASP Genes
label        = 1
description  = 1
glyph        = wormbase_transcript
title        = FGENESH++ gene $name
citation     = FGENESH++ gene set from the nGASP competition.  Courtesy of Darin Blasiar.
               Gene models are available for download at ftp://ftp.wormbase.org/pub/wormbase/nGASP/final_gene_predictions/predictions

[JIGSAW]
feature      = ngasp_gene:nGASP
key          = JIGSAW combined genes
category     = nGASP Genes
label        = 1
description  = 1
glyph        = wormbase_transcript
title        = JIGSAW gene $name
citation     = JIGSAW gene set from the nGASP competition.  This is the combined gene set for AUGUSTUS
               mGENE and FGENESH++.  Courtesy of Darin Blasiar.
               Gene models are available for download at ftp://ftp.wormbase.org/pub/wormbase/nGASP/final_gene_predictions/predictions


[HMM]
feature       = similarity:hmmfs.3 repeat_region:RepeatMasker
category      = Misc
bgcolor       = red
fgcolor       = black
height        = 4
connector     = none
key           = Complex Repeats
citation      = This track contains matches to long repetitive elements detected using the HMMFS and RepeatMasker programs.

[REP]
feature       = tandem_repeat inverted_repeat
bgcolor       = bisque
fgcolor       = black
category      = Misc
height        = 4
key           = Simple Repeats
connector     = none
description   = sub {
	my $f = shift;
	my ($ref,$start,$stop) = ($f->ref,$f->start,$f->stop);
	my $method = $f->method;
	$method =~ s/_/ /g;
	return join('; ',$f->notes,"$ref: $start..$stop");
	}
label         = sub {
	my $f = shift;
	my $method = $f->method;
	$method =~ s/_/ /g;
	return $method;
	}
link          = 0
citation      = This track indicates the position of short exact tandem and inverted repetitive elements.
