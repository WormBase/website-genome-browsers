[GENERAL]
description   = A. suum (Davis assembly)
database = a_suum_davis

# list of tracks to turn on by default
default features = PRIMARY_GENE_TRACK AAUGUSTUS AmGENE AFGENESH

# The class of the objects used to establish the reference coordinates.
reference class  = Sequence

# examples to show in the introduction
examples = ASU_00040 AG20401

search attributes = Note Alias 

# "automatic" classes to try when an unqualified identifier is given
automatic classes = Sequence Gene

# Various places where you can insert your own HTML -- see configuration docs
html1 = sub { return CGI::h3(CGI::i('Assembly from the laboratory of Richard Davis')); }

# Override the [DETAIL SELECT MENU] from detail_select_menu.conf
#include includes/detail_menu-default.conf

# Plugin configuration
#include includes/plugin.conf


###################################
# Global track defaults.
# Can be overridden by any track
###################################
[TRACK DEFAULTS]
#include includes/track_defaults.conf
# tierIII specific?
label_transcripts = sub { shift->get_SeqFeatures('mRNA') > 1 }

#################################
# database definitions
#################################
[a_suum_davis:database]
db_adaptor  = Bio::DB::SeqFeature::Store
db_args     = -adaptor DBI::mysql
              -dsn a_suum_davis 
              -user nobody
passwd      =
search options = default +wildcard -stem +fulltext +autocomplete


################################################
# GENE MODELS
################################################
# Much redundancy here with gene_models-GFF3
# but a. suum uses custom sources to distinguish
# between prediction algorithms. Maybe better
# suited as an attribute?
[PRIMARY_GENE_TRACK]
feature      = gene:maker
	       gene:tophat
	       gene:ratt
glyph        = gene
category     = Genes
key          = Gene Models
bgcolor      = sub {
	     my $f = shift;
	     return 'gray'   if $f->method =~ /pseudogene/i;
             return 'gray'   if $f->source =~ /pseudogene/i;
	     return 'gray'   if $f->source =~ /ncrna|non_coding/i;
	     return 'violet' if $f->strand > 0;
	     return 'turquoise';
	     }
fgcolor      = black
utr_color    = gray
font2color   = blue
height       = sub {
               my $f = shift;
               return $f->method =~  /CDS|mRNA|exon|gene/i ? 10 : 6;
	}
#balloon hover  = sub {my $f = shift;
#	                my $name = $f->name; 
#                        my $class = $f->class;
#    		        "url:/gbrowse_popup?name=$name;class=$class;type=CG";
#	} 
link         = AUTO
label        = sub {
               	my $f = shift;
	       	my $label = $f->name;
	       	my ($locus) = $f->attributes('Locus');	
	       	$label .= " ($locus)" if $locus;
	       	return $label;
	}
description = sub {
	    my $f = shift;
	    my $s = $f->source;	    
	    
	    my ($alias) = $f->attributes('Alias');
	    my ($status) = $f->attributes('Status');	      
	    unless ($alias) {
         	    ($alias) = $f->attributes('Locus');
            }
	    $alias =~ s/^\w\w\w\w-//g;
	    my @values;
	    push @values,"Method: $s";
	    push @values, "C. elegans ortholog: $alias" if $alias;
	    push @values,$f->notes;
	    push @values,$status if $status;
	    return join("; ",@values); 
	    }
citation     = The pink and blue colors indicate transcripts on the forward and 
               reverse strands respectively. If sufficient room is available between 
               features, gene models end with a triangle; if not a small arrow is used.

[PRIMARY_GENE_TRACK:150000]
glyph        = generic
strand_arrow = 1
bgcolor      = sub {shift->strand>0?'violet':'turquoise'}
description = 0

# This is spefic for A. suum (davis). See below.
# [CDS]
# include includes/cds-gff3.track

# [DNA]
#include includes/dna.track


################################################
# Standard Analysis tracks
################################################
#include includes/standard_analysis_tracks.conf



################################################
# A. suum (Davis) specific
# Lots of repetition here with the gene_models-GFF3.track
################################################
[CDS]
feature      = CDS:maker
	       CDS:tophat
	       CDS:ratt
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
category     = Genes
description  = 0
require_subparts = 1
height       = 13
label        = sub { my $feature = shift; return "Frame usage for $feature "  }
key          = Coding Segments
citation     = This track shows the reading frames of coding segments (also known as "CDS" features).  

[ELIMINATED_REGIONS]
feature = eliminated_region:WormBase
key     = Eliminated regions
category = Misc
glyph   = box
bgcolor = blue
fgcolor = black
link    = 0
citation = These eliminated regions correspond to stretches of genomic sequence
	   which have undergone chromatin diminution. This process involves the
	   programmed elimination of specific DNA sequences during development.
	   In Ascaris suum the process occurs during early embryonic cleavages
	   and leads to the loss of germline genomic sequences and the formation
	   of a distinct genome in somatic cells. The specific function and 
	   specificity of sequence loss remain largely unknown.

	   Wang J, Mitreva M, Berriman M, et al. Silencing of germline-expressed
	   genes by DNA elimination in somatic cells Dev. Cell (2012). 
	   <a href="http://www.ncbi.nlm.nih.gov/pubmed/?term=23123092">Pubmed</a>.
