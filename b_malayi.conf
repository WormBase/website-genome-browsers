[GENERAL]
description = B. malayi (current release)
database    = b_malayi

# list of tracks to turn on by default
default features = PRIMARY_GENE_TRACK CDS

# The class of the objects used to establish the reference coordinates.
reference class  = Sequence

# examples to show in the introduction
examples = Bmal_v3_scaffold59
	   Bm7690
           Bm7696a

search attributes = Note Alias ID

# "automatic" classes to try when an unqualified identifier is given
automatic classes = Sequence CDS

# Various places where you can insert your own HTML -- see configuration docs
#html1 =  sub { return CGI::h1(CGI::i('Brugia malayi')); }

# Override the [DETAIL SELECT MENU] from detail_select_menu.conf
#include includes/detail_menu-default.conf

# Plugin configuration
#include includes/plugin.conf

###################################
# Global track defaults.
# Can be overridden by any track
###################################
[TRACK DEFAULTS]
#include includes/track_defaults.conf


#################################
# database definitions
#################################
[b_malayi:database]
db_adaptor  = Bio::DB::GFF
db_args     = -adaptor DBI::mysql
              -dsn b_malayi
              -user nobody
passwd      =
search options = default +wildcard -stem +fulltext +autocomplete

# NOTE: the full_transcript aggregator here has to use CDS for the parent feature instead of Transcript like other species.
# And many of the aggregators here are not required.
aggregators = clone 
     	      alignment 
	      waba_alignment 
	      full_transcript{coding_exon,five_prime_UTR,three_prime_UTR/Transcript}   
	      full_transcript_non_coding{exon,five_prime_UTR,three_prime_UTR/Transcript}
    	      ngasp_gene{CDS,three_prime_UTR,five_prime_UTR}
    	      transposon{coding_exon,five_prime_UTR,three_prime_UTR}
	      processed_transcript{coding_exon,five_prime_UTR,three_prime_UTR/CDS}
	      pseudo{exon:Pseudogene/Pseudogene}
	      RNA{exon/Transcript}
	      coding{coding_exon}
	      coding_gene_predictions{exon/CDS}
    	      motif_span{motif_segment/Motif}
    	      rnai{RNAi_reagent}
	      ost{expressed_sequence_match}
	      sage_tag{SAGE_tag}
	      wormbase_cds{coding_exon,CDS,five_prime_UTR,three_prime_UTR/CDS}

################## TRACK CONFIGURATION ####################
# the remainder of the sections configure individual tracks
###########################################################

################################################
# GENE MODELS
################################################
# [PRIMARY_GENE_TRACK]
#include includes/gene_models-tier2.track

# [CODING_TRANSCRIPTS]
#include includes/coding_transcripts.track

# [CDS]
#include includes/cds.track

# [DNA]
#include includes/dna.track

# [HISTORICAL_GENES]
#include includes/historical_genes.track





################################################
# Standard Analysis
################################################
#include includes/standard_analysis_tracks.conf

#include includes/standard_analysis_tracks.tier3.conf

######################################
#  Alignments / Comparative Genomics
######################################
## BLAT C. elegans EST Best and BLAT EST other aligned to this species.
## Note that the feature is not consistently named across species
## nor are the available for all
[ELEGANS_ESTS_BEST]
feature       = alignment:BLAT_EST_BEST
glyph         = segments
category      = Comparative Genomics
key           = C. elegans ESTs (BLAT; best)
citation      = These are C. elegans ESTs that have been aligned to 
	        the B. malayi genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].
                 The 5' and 3' reads of a single EST are connected by a dashed line. 
bgcolor       = yellow
fgcolor       = black
height        = 4
connector     = solid
draw_target    = 1
show_mismatch  = 1
ragged_start   = 1
group_pattern = /\.[35]$/

[ELEGANS_ESTS_OTHER]
feature        = alignment:BLAT_EST_OTHER
glyph          = segments
category       = Comparative Genomics
key            = C. elegans ESTs (BLAT; other)
draw_target    = 1
show_mismatch  = 1
ragged_start   = 1
bgcolor        = limegreen
fgcolor        = black
connector      = solid
height         = 5
group_pattern = /\.[35]$/
citation       = These are C. elegans expressed sequence tags (ESTs), that have been
                 aligned to the B. malayi genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].
                 The 5' and 3' reads of a single EST are connected by a dashed line.

# C. elegans mRNAs aligned by blat to species. Note: Different features in use.
[ELEGANS_MRNAS_BEST]
feature       = alignment:BLAT_mRNA_BEST
glyph         = segments
key           = C. elegans mRNAs (BLAT; best)
category      = Comparative Genomics
label         = sub {
                my $f = shift;
                my $label = ($f->source =~ /BLAT_mRNA/) ? 'mRNA' : 'ncRNA';
                my $name = $f->name;
                return "$label: $name";
        }
link          = http://www.ncbi.nlm.nih.gov/htbin-post/Entrez/query?db=n&form=1&field=Sequence+ID&term=$name
citation      = These are C. elegans full length cDNAs and ncRNAs that have been aligned to
                the B. malayi genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].   
draw_target   = 1
show_mismach  = 1
ragged_start  = 1
bgcolor       = sub {   
                my $f = shift;
                return 'yellow' if ($f->source =~ /BLAT_mRNA/);
                return 'grey';
               }
fgcolor       = black
height        = 5
connector     = solid

# NOT AVAILABLE FOR ALL SPECIES
[ELEGANS_MRNAS_OTHER]
feature       = cDNA_match:BLAT_mRNA_OTHER
glyph         = segments
category      = Comparative Genomics
key           = C. elegans mRNAs (BLAT; other)
label         = sub {
                my $f = shift;
                my $label = ($f->source =~ /BLAT_mRNA/) ? 'mRNA' : 'ncRNA';
                my $name = $f->name;
                return "$label: $name";
        }
draw_target   = 1
show_mismach  = 1
ragged_start  = 1
bgcolor       = sub {
                my $f = shift;
                return 'yellow' if ($f->source =~ /BLAT_mRNA/);
                return 'grey';
               }
fgcolor       = black
height        = 5
connector     = solid
citation      = These are C. elegans full length cDNAs and ncRNAs that have been aligned to
                the B. malayi genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].


# NOT AVAILABLE FOR ALL SPECIES
[CAENORHABDITIS_ESTS_BEST]
feature        = alignment:BLAT_Caen_EST_BEST
glyph          = segments
key            = Caenorhabditis ESTs (BLAT; best)
category       = Comparative Genomics
draw_target    = 1
show_mismatch  = 1
ragged_start   = 1
bgcolor        = limegreen
fgcolor        = black
connector      = solid
height         = 5
group_pattern = /\.[35]$/
citation       = These are <i>Caenorhabditis</i> expressed sequence tags (ESTs), that have been
                 aligned to the C. remanei genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].
                 The 5' and 3' reads of a single EST are connected by a dashed line.

# NOT AVAILABLE FOR ALL SPECIES
[CAENORHABDITIS_ESTS_OTHER]
feature        = alignment:BLAT_Caen_EST_OTHER
glyph          = segments
category       = Comparative Genomics
key            = Caenorhabditis ESTs (BLAT; other)
draw_target    = 1
show_mismatch  = 1
ragged_start   = 1
bgcolor        = limegreen
fgcolor        = black
connector      = solid
height         = 5
group_pattern = /\.[35]$/
citation       = These are <i>Caenorhabditis</i> expressed sequence tags (ESTs), that have been
                 aligned to the B. malayi genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].
                 The 5' and 3' reads of a single EST are connected by a dashed line.

# NOT AVAILABLE FOR ALL SPECIES
[CAENORHABDITIS_MRNAS_BEST]
feature       = alignment:BLAT_Caen_mRNA_BEST
glyph         = segments
key           = Caenorhabditis RNAs (BLAT best)
category      = Comparative Genomics
label         = sub {
                my $f = shift;
                my $label = ($f->source =~ /BLAT_Caen_mRNA/) ? 'mRNA' : 'ncRNA';
                my $name = $f->name;
                return "$label: $name";
        }
draw_target   = 1
show_mismach  = 1
ragged_start  = 1
bgcolor       = sub {
                my $f = shift;
                return 'yellow' if ($f->source =~ /BLAT_mRNA/);
                return 'grey';
               }
fgcolor       = black
height        = 5
connector     = solid
citation      = These are <i>Caenorhabditis</i> full length cDNAs and ncRNAs that have been aligned to
                the B. malayi genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].

# NOT AVAILABLE FOR ALL SPECIES
[TS]
feature      = SL1_acceptor_site SL2_acceptor_site
category     = Genes
glyph        = triangle
#glyph        = sub {
#               my $feature = shift;
#               return $feature->source eq 'SL1' ? 'diamond' : 'triangle';
#       }
point        = 1
orient       = sub {
        my $feature = shift;
        my $strand  = $feature->strand;
        return 'E' if $strand > 0;
        return 'W';
        }
bgcolor      = sub {
            my $feature = shift;
            return $feature->source eq 'SL1' ? 'red' : 'green';
        }
font2color   = 'red';
height       = 8
label        = 0
label density = 100
description  = sub {
                shift->source;
        }
key          = Trans-spliced acceptor
citation     = These are trans-spliced acceptors predicted from RNASeq.

# NOT AVAILABLE FOR ALL SPECIES
[OP]
feature      = operon:operon
glyph        = generic
category     = General
strand_arrow = 1
bgcolor      = green
height       = 7
description  = 1
label        = 0
key          = Operons
citation     = polycistrons mined from cufflinks RNASeq data

# NOT AVAILABLE FOR ALL SPECIES
[CAENORHABDITIS_MRNAS_OTHER]
feature       = alignment:BLAT_Caen_mRNA_OTHER
key           = Caenorhabditis RNAs (BLAT; other)
category      = Comparative Genomics
glyph         = segments
label         = sub {
                my $f = shift;
                my $label = ($f->source =~ /BLAT_mRNA/) ? 'mRNA' : 'ncRNA';
                my $name = $f->name;
                return "$label: $name";
        }
draw_target   = 1
show_mismach  = 1
ragged_start  = 1
bgcolor       = sub {
                my $f = shift;
                return 'yellow' if ($f->source =~ /BLAT_mRNA/);
                return 'grey';
               }
fgcolor       = black
height        = 5
connector     = solid
citation      = These are <i>C. elegans</i> full length cDNAs and ncRNAs that have been aligned to
                the B. malayi genome using Jim Kent's BLAT program [<a href="http://genome.cse.ucsc.edu/cgi-bin/hgBlat">
                 http://genome.cse.ucsc.edu/cgi-bin/hgBlat</a>].

################################################
# Malayi specific configuration
################################################
# NOT AVAILABLE FOR ALL SPECIES
[BLASTX]
feature       = protein_match:wublastx
key           = Protein Hits (BLASTX)
category      = Comparative Genomics
glyph         = segments
bgcolor       = sub { $_[0]->name =~ /^BP:/ ? 'blue' : 'orange' }
fgcolor       = black
height        = 5
citation =  These are WUBLASTX (nucleotide to protein, via six-frame
        translation) similarity hits from the genomes of yeast, fly, worm and human and subsets of 
        Swissprot and TREMBL.  Analysis provided by Anthony Rogers.

# NOT AVAILABLE FOR ALL SPECIES
[WABA]
feature           = waba_alignment
key               = Nucleotide alignments to C. elegans (WABA)
category          = Comparative Genomics
bgcolor           = blue
glyph             = heterogeneous_segments
waba_weak_color   = gainsboro
waba_strong_color = cornflowerblue
waba_coding_color = blue
fgcolor           = black
height            = 6
connector         = dashed
box_subparts      = 0
label             = sub {	
			my $feature = shift;
			my $ref   = $feature->target;
			my $start = $feature->target->start;
			my $stop  = $feature->target->end;
	       		my $first = ($feature->segments)[0];
                	my $strand = defined $first && $first->start>$first->end ? -1 : +1;
			($start,$stop) = ($stop,$start) if $strand < 0;
	        	"$ref:$start..$stop";
		    }
citation      = These are segments of the B. malayi rough draft sequence that have been
		aligned to the C. elegans genome using Jim Kent's WABA program [Kent & Zahler, 
		Genome Res 10:1115-25 (2000)].
		WABA distinguishes between low similarity regions (light blue), high-similarity regions
		(medium blue), and regions of high similarity that have the characteristic wobble-base
		mismatch of coding regions (dark blue).  Also see "Briggsae Alignments (BLAST)".


#include includes/tierII.conf


################################################
# RNASeq
################################################
#include includes/rna_seq.conf





################################################
# B. malayi specific configuration
################################################
[CUFFLINKS_ML3]
feature = coding_gene_predictions:cufflinks_merged_L3
category = Cufflinks
key      = Cufflinks merged L3
glyph    = gene 
strand_arrow = 1
fgcolor  = red
bgcolor  = orange
height   = 4
citation = Cufflinks assembled RNASeq from L3 stage libraries: Third-stage larvae 
           were acquired from the [NIH Filariasis Reagent Resource Center]. They were
           isolated from Aedes aegypti black-eyed Liverpool strain (LVP) mosquitoes
           10-14 days post infection and rinsed in media 3 times prior to flash freezing.

[CUFFLINKS_L4]
feature  = coding_gene_predictions:cufflinks_L4
category = Cufflinks
key      = Cufflinks L4
glyph    = gene 
strand_arrow = 1
fgcolor  = red
bgcolor  = orange
height   = 4
citation = Cufflinks assembled RNASeq from L4 stage libraries: B. malayi L4s were harvested
	   from peritoneally-infected gerbils 13-14 days post-infection (approximately 6-7 
           days after the L3->L4 molt). This developmental stage is characterized by 
           posterior lengthening of the primordial ovaries in females and the single testis
	   in males. These larvae were rinsed with media 3 times and flash frozen prior to
	   RNA isolation.

[CUFFLINKS_AM]
feature  = coding_gene_predictions:cufflinks_Adult_male
category = Cufflinks
key      = Cufflinks Adult Male
glyph    = gene 
strand_arrow = 1
fgcolor  = red
bgcolor  = orange
height   = 4
citation = Cufflinks assembled RNASeq from adult male libraries: B. malayi adult males were
	   isolated from peritoneally-infected gerbils >60 days post infection. The testes
	   were filled with sperm, and males used in the experiment came from patent infections,
	   therefore were actively mating.

[CUFFLINKS_AF]
feature  = coding_gene_predictions:cufflinks_Adult_female
category = Cufflinks
key      = Cufflinks Adult Female
glyph    = gene 
strand_arrow = 1
fgcolor  = red
bgcolor  = orange
height   = 4
citation = Cufflinks assembled RNASeq from adult female libraries: B. malayi adult females were
	   isolated from peritoneally-infected gerbils >60 days post infection. Females were
	   gravid and actively releasing mf. They were rinsed with media 3 times and flash frozen
	   prior to RNA isolation.

[CUFFLINKS_IF]
feature  = coding_gene_predictions:cufflinks_immature_microfilariae
category = Cufflinks
key      = Cufflinks Immature Microfilariae
glyph    = gene 
strand_arrow = 1
fgcolor  = red
bgcolor  = orange
height   = 4
citation = Cufflinks assembled RNASeq from immature microfilariae libraries: Immature B. malayi
	   microfilariae were generated by transplanting gravid adult worms into the peritoneal
	   cavity of uninfected gerbils. The mf were isolated three days later by peritoneal
	   flush, and purified using a lymphocyte separation gradient. They were flash frozen
	   prior to RNA isolation. They were confirmed to lack infectivity for Aedes aegypti
	   black-eyed Liverpool strain (LVP) mosquitoes.

[CUFFLINKS_EE]
feature  = coding_gene_predictions:cufflinks_eggs_embryos
category = Cufflinks
key      = Cufflinks Eggs Embryo
glyph    = gene 
strand_arrow = 1
fgcolor  = red
bgcolor  = orange
height   = 4
citation = Cufflinks assembled RNASeq from egg and embryo libraries: B. malayi eggs and developing
	   embryos were isolated from 90 adult female worms generated by peritoneal infection of
	   gerbils. Females were repeatedly scored with a razor blade to release the eggs and embryos,
	   and contaminated tissue was manually removed. They were washed 2 times with sterile media
	   in a small Petri dish, transferred to a microfuge tube, centrifuged, and the supernatant
	   was removed prior to flash-freezing. This preparation contained unfertilized eggs,
	   fertilized eggs, embryos and pretzel stages.

[CUFFLINKS_MICROFILLARIAE]
feature  = coding_gene_predictions:cufflinks_microfillariae
category = Cufflinks
key      = Cufflinks Mature Microfillariae
glyph    = gene 
strand_arrow = 1
fgcolor  = red
bgcolor  = orange
height   = 4
citation = Cufflinks assembled RNASeq from mature microfillariae libraries: Mature B. malayi
	   microfilariae were isolated by peritoneal flush from gerbils >60 days post infection and
	   purified using a lymphocyte separation gradient. They were flash frozen prior to RNA
	   isolation. They were confirmed to be infective for Aedes aegypti black-eyed Liverpool
	   strain (LVP) mosquitoes.

[TIGR_BEST]
feature  = alignment:TIGR_BEST
category = Genes
key      = Aligned TIGR genes models
glyph    = segments
citation = These are B.malayi gene models from TIGR
bgcolor  = yellow
fgcolor  = orange
height   = 4
connector = solid
draw_target = 1
show_mismatch = 1
ragged_start  = 1
 
